@using AIStudio.Settings.DataModel

@namespace AIStudio.Components
@inherits MSGComponentBase

@if (PreviewFeatures.PRE_SPEECH_TO_TEXT_2026.IsEnabled(this.SettingsManager) && !string.IsNullOrWhiteSpace(this.SettingsManager.ConfigurationData.App.UseTranscriptionProvider))
{
    <MudTooltip Text="@this.Tooltip">
        @if (this.isTranscribing || this.isPreparing)
        {
            <MudProgressCircular Size="Size.Small" Indeterminate="true" Color="Color.Primary"/>
        }
        else
        {
            <MudToggleIconButton Toggled="@this.isRecording"
                                 ToggledChanged="@this.OnRecordingToggled"
                                 Icon="@Icons.Material.Filled.Mic"
                                 ToggledIcon="@Icons.Material.Filled.Stop"
                                 Color="Color.Primary"
                                 ToggledColor="Color.Error"/>
        }
    </MudTooltip>
}
